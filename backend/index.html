<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ðŸ¦š-radio</title>
    <style>
        body {
            background-color: #2c3e50;
            color: white;
            font-family: "Lucida Console", monospace;
            text-align: center;
        }
        .toggleImg {
            height: 200px;
            cursor: pointer;
            border: 1px solid #5ac395;
            border-radius: 3%;
        }
        .toggleImg:hover { opacity: 0.85; }
    </style>
</head>
<body>
    <h1>Bienvenue sur la ðŸ¦š-radio</h1><br>
    <img id="toggleImg" src="./assets/images/musicplaying.jpg" class="toggleImg">
    <audio id="audioPlayer" controls>
        <source src="/audio-stream" type="audio/mpeg">
    </audio>
    <div id="now-playing">Loading...</div>

    <script>
        const audio = document.getElementById('audioPlayer');
        const img = document.getElementById('toggleImg');

        img.onclick = () => {
            audio.paused ? audio.play() : audio.pause();
            img.src = `./assets/images/musicplaying.${audio.paused ? 'jpg' : 'webp'}`;
        };

        async function updateNowPlaying() {
            const data = await fetch('/now-playing').then(r => r.json());
            document.getElementById('now-playing').textContent = data.title || 'Unknown Title';
        }

        setInterval(updateNowPlaying, 1000);
        updateNowPlaying();
    </script>
</body>
</html>